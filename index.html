<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>智能问数小助手</title>
  <style>
    body, html { margin: 0; padding: 0; height: 100%; }
    #assistant-container { width: 100%; height: 100vh; }
  </style>
</head>
<body>
  <div id="assistant-container" class="copilot"></div>

  <script>
    // 加载海聚问数嵌入脚本
    (function(){
      const script = document.createElement('script');
      script.defer = true;
      script.async = true;
      script.src = "http://191.holardata.com:18000/xpack_static/sqlbot-embedded-dynamic.umd.js";
      document.head.appendChild(script);
    })();

    // 等待挂载，带超时保护
    let timer = setInterval(() => {
      if (window.sqlbot_embedded_handler?.mounted) {
        try {
          window.sqlbot_embedded_handler.mounted('.copilot', {
            embeddedId: "7399668631392489472"
          });
          console.log("✅ 小助手已成功挂载！");
          clearInterval(timer);
        } catch (e) {
          console.error("❌ 挂载失败:", e);
          clearInterval(timer);
        }
      }
    }, 500);

    // 设置超时防止卡死
    setTimeout(() => {
      if (timer) {
        clearInterval(timer);
        console.error("⚠️ 超时：未能加载 sqlbot_embedded_handler");
      }
    }, 10000);
  </script>
</body>
</html>
